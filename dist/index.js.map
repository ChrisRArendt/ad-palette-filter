{"version":3,"file":"index.js","sources":["../src/utils.js","../src/shaders.js","../src/core.js","../src/index.js"],"sourcesContent":["// src/utils.js\r\n\r\n// ——————————————————————————————————————————————\r\n// Minimal WebGL helper class\r\n// ——————————————————————————————————————————————\r\nexport class WebGLUtils {\r\n  constructor(gl) {\r\n    this.gl = gl;\r\n  }\r\n\r\n  // Compile & link shaders into a program\r\n  getProgram(vertexSrc, fragmentSrc) {\r\n    const gl = this.gl;\r\n    const compile = (source, type) => {\r\n      const s = gl.createShader(type);\r\n      gl.shaderSource(s, source);\r\n      gl.compileShader(s);\r\n      if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) {\r\n        throw new Error(`Shader compile error: ${gl.getShaderInfoLog(s)}`);\r\n      }\r\n      return s;\r\n    };\r\n\r\n    const vs = compile(vertexSrc, gl.VERTEX_SHADER);\r\n    const fs = compile(fragmentSrc, gl.FRAGMENT_SHADER);\r\n    const prog = gl.createProgram();\r\n    gl.attachShader(prog, vs);\r\n    gl.attachShader(prog, fs);\r\n    gl.linkProgram(prog);\r\n    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\r\n      throw new Error(`Program link error: ${gl.getProgramInfoLog(prog)}`);\r\n    }\r\n    return prog;\r\n  }\r\n\r\n  // Create & fill a buffer\r\n  createAndBindBuffer(type, usage, data) {\r\n    const gl = this.gl;\r\n    const buf = gl.createBuffer();\r\n    gl.bindBuffer(type, buf);\r\n    gl.bufferData(type, data, usage);\r\n    return buf;\r\n  }\r\n\r\n  // Wire up a Float32Array buffer to an attribute\r\n  linkGPUAndCPU(program, buffer, dims, name) {\r\n    const gl = this.gl;\r\n    const loc = gl.getAttribLocation(program, name);\r\n    if (loc < 0) throw new Error(`Attrib \"${name}\" not found`);\r\n    gl.enableVertexAttribArray(loc);\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.vertexAttribPointer(loc, dims, gl.FLOAT, false, 0, 0);\r\n  }\r\n\r\n  // Create a texture from either an Image or raw Uint8Array palette\r\n  createTextureFromPixels(source, width = null) {\r\n    const gl = this.gl;\r\n    const tex = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, tex);\r\n\r\n    if (source instanceof Uint8Array) {\r\n      // palette: width×1 RGBA\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D, 0, gl.RGBA,\r\n        width, 1, 0,\r\n        gl.RGBA, gl.UNSIGNED_BYTE,\r\n        source\r\n      );\r\n    } else {\r\n      // assume HTMLImageElement\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA,\r\n        gl.UNSIGNED_BYTE, source);\r\n    }\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S,     gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T,     gl.CLAMP_TO_EDGE);\r\n    return tex;\r\n  }\r\n}\r\n\r\n// ——————————————————————————————————————————————\r\n// Conveniences\r\n// ——————————————————————————————————————————————\r\n\r\n/**\r\n * Create a WebGL2 context + attach utils.\r\n */\r\nexport function createGL(canvas) {\r\n  const gl = canvas.getContext(\"webgl2\");\r\n  if (!gl) throw new Error(\"WebGL2 not supported\");\r\n  gl.utils = new WebGLUtils(gl);\r\n  return gl;\r\n}\r\n\r\n/**\r\n * Map a bound buffer → attribute `name` (Float32, 2 components).\r\n */\r\nexport function linkAttr(gl, program, buffer, name) {\r\n  gl.utils.linkGPUAndCPU(program, buffer, 2, name);\r\n}\r\n\r\n/**\r\n * Helper to build a GL texture from either:\r\n *  - an HTMLImageElement (auto‑sized)\r\n *  - a Uint8Array palette + width (1D LUT)\r\n */\r\nexport function createTextureFromPixels(gl, source, width = null) {\r\n  return gl.utils.createTextureFromPixels(source, width);\r\n}\r\n","export const VERT_SRC = `#version 300 es\r\nprecision mediump float;\r\nin vec2 position;\r\nin vec2 texCoords;\r\nout vec2 vUV;\r\nuniform float flipY;\r\nvoid main() {\r\n  gl_Position = vec4(position.x, position.y * flipY, 0., 1.);\r\n  vUV = position * .5 + .5;   // map [-1,1] → [0,1]\r\n}`;\r\n\r\nexport const FRAG_SRC = `#version 300 es\r\nprecision mediump float;\r\nin vec2 vUV;\r\nuniform sampler2D uImage;\r\nuniform sampler2D uColorPalette;\r\nout vec4 color;\r\nvoid main(){\r\n  vec4 src = texture(uImage, vUV);\r\n  // Assume palette is 1px tall; use red‑channel as lookup coord\r\n  color = texture(uColorPalette, vec2(src.r, 0.));\r\n}`;\r\n","/* eslint-disable no-unused-vars */\r\nimport { createGL, linkAttr, createTextureFromPixels } from './utils.js';\r\nimport { VERT_SRC, FRAG_SRC } from './shaders.js';\r\n\r\nexport class PaletteEngine {\r\n  #gl;\r\n  #program;\r\n  #uImage;\r\n  #uPalette;\r\n  #flipY;\r\n  #palettes = new Map();          // name → Uint8Array texture\r\n  #canvas;\r\n  constructor() {\r\n    this.#canvas = document.createElement('canvas');\r\n    this.#gl = createGL(this.#canvas);\r\n    this.#program = this.#gl.utils.getProgram(this.#gl, VERT_SRC, FRAG_SRC);\r\n\r\n    // static uniforms\r\n    this.#gl.useProgram(this.#program);\r\n    this.#uImage   = this.#gl.getUniformLocation(this.#program, 'uImage');\r\n    this.#uPalette = this.#gl.getUniformLocation(this.#program, 'uColorPalette');\r\n    this.#flipY    = this.#gl.getUniformLocation(this.#program, 'flipY');\r\n    this.#gl.uniform1i(this.#uImage,   0);\r\n    this.#gl.uniform1i(this.#uPalette, 1);\r\n    this.#gl.uniform1f(this.#flipY, -1);\r\n\r\n    // full‑screen quad once\r\n    const quad = new Float32Array([-1,-1, 1,1, -1,1,  -1,-1, 1,1, 1,-1]);\r\n    const buffer = this.#gl.utils.createAndBindBuffer(this.#gl.ARRAY_BUFFER, this.#gl.STATIC_DRAW, quad);\r\n    linkAttr(this.#gl, this.#program, buffer, 'position');\r\n    linkAttr(this.#gl, this.#program, buffer, 'texCoords', 0, 2, 0, 0); //reuse positions for texCoords\r\n  }\r\n\r\n  addPalette(name, rgbTriplets) {\r\n    const gl = this.#gl;\r\n    const tex = createTextureFromPixels(gl, new Uint8Array(rgbTriplets), rgbTriplets.length / 3);\r\n    this.#palettes.set(name, tex);\r\n  }\r\n\r\n  transform(imgEl) {\r\n    const paletteName = imgEl.dataset.palette;\r\n    if (!this.#palettes.has(paletteName)) {\r\n      console.warn(`[ad-palette-filter] palette \"${paletteName}\" not registered`);\r\n      return;\r\n    }\r\n\r\n    const gl = this.#gl;\r\n    // resize canvas to img\r\n    this.#canvas.width  = imgEl.naturalWidth;\r\n    this.#canvas.height = imgEl.naturalHeight;\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    // upload source img\r\n    const srcTex = createTextureFromPixels(gl, imgEl);\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, srcTex);\r\n\r\n    // bind palette texture\r\n    gl.activeTexture(gl.TEXTURE1);\r\n    gl.bindTexture(gl.TEXTURE_2D, this.#palettes.get(paletteName));\r\n\r\n    // draw\r\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n\r\n    // replace <img> with <canvas> (non‑destructive clone)\r\n    this.#canvas.toBlob(blob => {\r\n      const url = URL.createObjectURL(blob);\r\n      imgEl.src = url;          // swap pixels\r\n    }, 'image/png');\r\n  }\r\n}\r\n","// ad-palette-filter  – Public facade\r\nimport { PaletteEngine } from './core.js';\r\n\r\nconst _engine = new PaletteEngine();\r\n\r\n/**\r\n * Registers one or many palettes\r\n * @param {Record<string, number[]>} palettes  – {name: [r,g,b,r,g,b …]} RGB triplets 0‑255\r\n */\r\nexport function registerPalettes(palettes) {\r\n  Object.entries(palettes).forEach(([name, arr]) => _engine.addPalette(name, arr));\r\n}\r\n\r\n/**\r\n * Manually apply the palette to a single <img> element.\r\n * (Auto‑runs on DOMContentLoaded for all data‑palette imgs.)\r\n */\r\nexport function transform(imgEl) {\r\n  _engine.transform(imgEl);\r\n}\r\n\r\n// --- Auto bootstrap ---\r\nif (typeof window !== 'undefined') {\r\n  window.addEventListener('DOMContentLoaded', () => {\r\n    document\r\n      .querySelectorAll('img[data-palette]')\r\n      .forEach(el => transform(el));\r\n  });\r\n}\r\n"],"names":[],"mappings":"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"}